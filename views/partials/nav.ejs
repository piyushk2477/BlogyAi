<!-- Pixel-style Navbar -->
<nav class="w-full bg-white border-b-4 border-black shadow-[6px_6px_0px_black] sticky top-0 z-50 font-[VT323]">
  <div class="max-w-7xl mx-auto px-4 flex items-center justify-between h-16">

    <!-- Brand -->
    <a href="/" class="font-sans text-3xl font-bold uppercase tracking-widest hover:underline">
      BlogyAI
    </a>

    <!-- Desktop Menu -->
    <ul class="hidden md:flex items-center gap-6 text-sm uppercase">
      <li><a href="/" class="hover:underline border-2 border-black px-2 py-1 shadow-[3px_3px_0px_black] hover:translate-x-1 hover:translate-y-1 transition-all font-sans">Home</a></li>

      <% if (locals.user && locals.user.role === 'ADMIN') { %>
      <li><a href="/blog/add-new" class=" font-sans hover:underline border-2 border-black px-2 py-1 shadow-[3px_3px_0px_black] hover:translate-x-1 hover:translate-y-1 transition-all">+ Add Blog</a></li>
      <% } %>

      <% if (locals.user) { %>
      <li class="relative group">
        <button class="flex items-center gap-2 border-2 border-black px-2 py-1 shadow-[3px_3px_0px_black] hover:translate-x-1 hover:translate-y-1 transition-all">
          <span><%= locals.user.fullName %></span>
          <% if (locals.user.role === 'ADMIN') { %>
          <span class=" font-sans bg-yellow-400 text-black px-1 text-xs border border-black">Admin</span>
          <% } %>
        </button>
        <!-- Dropdown -->
        <ul class="absolute hidden group-hover:block bg-white border-2 border-black shadow-[4px_4px_0px_black] mt-2 right-0 w-44 text-sm uppercase z-50">
          <li class="px-4 py-2 border-b border-black">
            <%= locals.user.role === 'ADMIN' ? 'Administrator' : 'User' %>
          </li>
          <% if (locals.user.role === 'ADMIN') { %>
          <li><a href="/blog/add-new" class="font-sans block px-4 py-2 border-b border-black hover:bg-gray-200">Create Blog</a></li>
          <% } %>
          <li><a href="/user/logout" class="block font-sans px-4 py-2 hover:bg-gray-200">Logout</a></li>
        </ul>
      </li>
      <% } else { %>
      <li><a href="/user/signup" class="hover:underline border-2 border-black px-2 py-1 shadow-[3px_3px_0px_black] hover:translate-x-1 hover:translate-y-1 transition-all font-sans">Create Account</a></li>
      <li><a href="/user/signin" class="hover:underline border-2 border-black px-2 py-1 shadow-[3px_3px_0px_black] hover:translate-x-1 hover:translate-y-1 transition-all font-sans">Sign In</a></li>
      <% } %>
    </ul>

    <!-- Mobile Menu Button -->
    <button id="menu-btn" class="md:hidden border-2 border-black px-3 py-1 shadow-[3px_3px_0px_black] hover:translate-x-1 hover:translate-y-1 transition-all">â˜°</button>
  </div>

  <!-- Mobile Dropdown -->
  <div id="mobile-menu" class="hidden md:hidden bg-white border-t-4 border-black text-sm uppercase">
    <ul class="flex flex-col">
      <li><a href="/" class="px-4 py-2 border-b border-black">Home</a></li>
      <% if (locals.user && locals.user.role === 'ADMIN') { %>
      <li><a href="/blog/add-new" class="px-4 py-2 border-b border-black">+ Add Blog</a></li>
      <% } %>
      <% if (locals.user) { %>
      <li class="px-4 py-2 border-b border-black">
        <%= locals.user.fullName %>
        <% if (locals.user.role === 'ADMIN') { %>
        <span class="bg-yellow-400 text-black px-1 text-xs border border-black">Admin</span>
        <% } %>
      </li>
      <% if (locals.user.role === 'ADMIN') { %>
      <li><a href="/blog/add-new" class="px-4 py-2 border-b border-black">Create Blog</a></li>
      <% } %>
      <li><a href="/user/logout" class="px-4 py-2 border-b border-black">Logout</a></li>
      <% } else { %>
      <li><a href="/user/signup" class="px-4 py-2 border-b border-black">Create Account</a></li>
      <li><a href="/user/signin" class="px-4 py-2 border-b border-black">Sign In</a></li>
      <% } %>
    </ul>
  </div>
</nav>

<script>
  // Toggle mobile menu
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("menu-btn");
    const menu = document.getElementById("mobile-menu");
    btn.addEventListener("click", () => {
      menu.classList.toggle("hidden");
    });
  });
</script>
